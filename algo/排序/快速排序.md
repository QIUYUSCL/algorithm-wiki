
# âš¡ å¿«é€Ÿæ’åº (Quick Sort)

> **å½’æ¡£**: #Algorithm #Sorting #Advanced
> 
> **æ ¸å¿ƒå¿ƒæ³•**: "åˆ†è€Œæ²»ä¹‹" â€”â€” é€‰ä¸ªè€å¤§åˆ’æ¸…ç•Œé™ï¼Œå·¦è¾¹éƒ½æ˜¯å°å¼Ÿï¼Œå³è¾¹éƒ½æ˜¯å¤§å“¥ã€‚

## ğŸ§  æ ¸å¿ƒæ€æƒ³ (å‰åºéå†)
å¿«æ’çš„æœ¬è´¨æ˜¯äºŒå‰æ ‘çš„**å‰åºéå†**ã€‚
1.  **é€‰åŸºå‡† (Pivot)**ï¼šéšæœºæŒ‘ä¸€ä¸ªæ•°ã€‚
2.  **åˆ‡åˆ† (Partition)**ï¼šæŠŠæ¯”åŸºå‡†å°çš„æ‰”å·¦è¾¹ï¼Œæ¯”åŸºå‡†å¤§çš„æ‰”å³è¾¹ã€‚
3.  **é€’å½’ (Recursion)**ï¼šå¯¹å·¦å³ä¸¤è¾¹é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°åªå‰©ä¸€ä¸ªå…ƒç´ ã€‚

## ğŸ¨ å›¾è§£æ¼”ç¤º

<QuickSortAnimation />

```mermaid
graph TD
    Root(æ•°ç»„: 5, 1, 9, 3, 7) -->|1. Partition Pivot=5| Split
    Split --> Left(å·¦åŒº: 1, 3)
    Split --> Pivot((åŸºå‡†: 5 å½’ä½))
    Split --> Right(å³åŒº: 9, 7)
    
    Left -->|2. é€’å½’å·¦è¾¹| L_Done(1, 3 æœ‰åº)
    Right -->|3. é€’å½’å³è¾¹| R_Done(7, 9 æœ‰åº)
    
    L_Done --> Result
    Pivot --> Result
    R_Done --> Result(æœ€ç»ˆ: 1, 3, 5, 7, 9)
    style Pivot fill:#f96,stroke:#333
````

## ğŸ’» ä»£ç å®ç° (C++ éšæœºåŒ–ç‰ˆ)


```cpp
 1. æŒ‡é’ˆäº¤æ¢æ³• 
// ä¹Ÿå« "å·¦å³æŒ‡é’ˆæ³•"
// æ ¸å¿ƒæ€è·¯ï¼šå·¦å³äº’æ‰¾ï¼Œæ‰¾åˆ°ä¸ç¬¦åˆè§„åˆ™çš„å°±äº¤æ¢
class Solution {
public:
    void quickSort(vector<int>& nums, int left, int right) {
        if (left >= right) return;
        
        int pivotIndex = partition(nums, left, right);
        quickSort(nums, left, pivotIndex - 1);
        quickSort(nums, pivotIndex + 1, right);
    }

    int partition(vector<int>& nums, int left, int right) {
	    
	    // ğŸ² éšæœºé€‰ä¸€ä¸ªä½ç½®ï¼Œè·Ÿæœ€å·¦è¾¹äº¤æ¢ 
	    int randIdx = left + rand() % (right - left + 1); 
	    swap(nums[left], nums[randIdx]);
	    
        int pivot = nums[left]; // é€‰æœ€å·¦ä¸ºåŸºå‡†
        int i = left + 1;
        int j = right;

        while (true) {
            // i å‘å³æ‰¾æ¯” pivot å¤§çš„
            while (i <= j && nums[i] <= pivot) i++;
            // j å‘å·¦æ‰¾æ¯” pivot å°çš„
            while (i <= j && nums[j] > pivot) j--;

            if (i >= j) break;
            
            // æ‰¾åˆ°äº†å°±äº¤æ¢
            swap(nums[i], nums[j]);
        }
        
        // æœ€åæŠŠåŸºå‡†æ¢åˆ°åˆ†ç•Œç‚¹
        swap(nums[left], nums[j]);
        return j;
    }
};
```

```cpp
2.æŒ–å‘æ³•
// æ ¸å¿ƒæ€è·¯ï¼šä¸ç”¨ swapï¼Œè€Œæ˜¯æŠŠæ•°ç›´æ¥å¡«å…¥â€œå‘â€é‡Œ
// ä¹Ÿå°±æ˜¯ï¼šå³è¾¹çš„æ•°å¡«å·¦è¾¹çš„å‘ï¼Œå·¦è¾¹çš„æ•°å¡«å³è¾¹çš„å‘
class Solution {
public:
    void quickSort(vector<int>& nums, int left, int right) {
        if (left >= right) return;
        
        int pivotIndex = partition(nums, left, right);
        quickSort(nums, left, pivotIndex - 1);
        quickSort(nums, pivotIndex + 1, right);
    }

    int partition(vector<int>& nums, int left, int right) {
        int pivot = nums[left]; // æŠŠæœ€å·¦è¾¹çš„æ•°æ‹¿å‡ºæ¥ï¼Œleft ä½ç½®å˜æˆäº†"å‘"
        
        while (left < right) {
            // 1. å³æŒ‡é’ˆå‘å·¦æ‰¾æ¯” pivot å°çš„æ•°
            while (left < right && nums[right] >= pivot) right--;
            
            // æ‰¾åˆ°äº†ï¼å¡«åˆ°å·¦è¾¹çš„"å‘"é‡Œï¼Œç°åœ¨ right å˜æˆäº†æ–°"å‘"
            nums[left] = nums[right];
            
            // 2. å·¦æŒ‡é’ˆå‘å³æ‰¾æ¯” pivot å¤§çš„æ•°
            while (left < right && nums[left] <= pivot) left++;
            
            // æ‰¾åˆ°äº†ï¼å¡«åˆ°å³è¾¹çš„"å‘"é‡Œï¼Œç°åœ¨ left å˜æˆäº†æ–°"å‘"
            nums[right] = nums[left];
        }
        
        // å¾ªç¯ç»“æŸæ—¶ left == rightï¼Œè¿™é‡Œæ˜¯æœ€åçš„å‘ï¼ŒæŠŠ pivot å¡«è¿›å»
        nums[left] = pivot;
        return left;
    }
};
```
### ğŸ’¡ æ ¸å¿ƒå¯¹æ¯”

|**æ–¹æ³•**|**æ“ä½œç‰¹ç‚¹**|**é€‚ç”¨åœºæ™¯**|
|---|---|---|
|**æŒ‡é’ˆäº¤æ¢æ³•**|`swap` äº¤æ¢ (3æ¬¡èµ‹å€¼)|**æ¨è**ã€‚é€»è¾‘ç›´è§‚ï¼Œå·¦å³ä¸¤è¾¹å¯¹ç€è·‘ï¼Œä¹Ÿæ˜¯ STL çš„ä¸»æµå®ç°æ€è·¯ã€‚|
|**æŒ–å‘æ³•**|ç›´æ¥è¦†ç›– (1æ¬¡èµ‹å€¼)|**ç»å…¸**ã€‚å°‘äº†ä¸€ç‚¹èµ‹å€¼å¼€é”€ï¼Œç†è§£èµ·æ¥åƒå¡«ç©ºæ¸¸æˆï¼Œä¸å®¹æ˜“æ­»å¾ªç¯ã€‚|
|**éšæœºåŒ–**|å…ˆéšæœºæ¢å¤´|**é˜²å‘**ã€‚è§£å†³ `[1,2,3,4,5]` è¿™ç§æœ‰åºæ•°ç»„å¯¼è‡´çš„ $O(N^2)$ é—®é¢˜ã€‚|
## ğŸ“Š å¤æ‚åº¦åˆ†æ

|**ç»´åº¦**|**æ•°å€¼**|**è¯´æ˜**|
|---|---|---|
|**æ—¶é—´ (å¹³å‡)**|$O(N \log N)$|æ¯æ¬¡åˆ‡åˆ†éƒ½å‡åŠ|
|**æ—¶é—´ (æœ€å·®)**|$O(N^2)$|æ¯æ¬¡éƒ½é€‰åˆ°æœ€å¤§/æœ€å°å€¼ (éšæœºåŒ–å¯é¿å…)|
|**ç©ºé—´**|$O(\log N)$|é€’å½’æ ˆçš„æ·±åº¦|
|**ç¨³å®šæ€§**|âŒ ä¸ç¨³å®š|è¿œè·ç¦»äº¤æ¢ç ´åé¡ºåº|

## ğŸ’¡ é€‚ç”¨åœºæ™¯

- **é€šç”¨æ’åº**ï¼šC++ `std::sort`ã€Java `Arrays.sort` (åŸºæœ¬ç±»å‹) çš„åº•å±‚æ ¸å¿ƒã€‚
    
- **æ•°ç»„æ’åºé¦–é€‰**ï¼šåœ¨å†…å­˜è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æœ€å¿«çš„é€šç”¨æ’åºã€‚