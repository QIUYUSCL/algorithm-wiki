
# âš¡ å¿«é€Ÿæ’åº (Quick Sort)

> **å½’æ¡£**: #Algorithm #Sorting #Advanced
> **æ ¸å¿ƒå¿ƒæ³•**: "åˆ†è€Œæ²»ä¹‹" â€”â€” é€‰ä¸ªè€å¤§åˆ’æ¸…ç•Œé™ï¼Œå·¦è¾¹éƒ½æ˜¯å°å¼Ÿï¼Œå³è¾¹éƒ½æ˜¯å¤§å“¥ã€‚

## ğŸ§  æ ¸å¿ƒæ€æƒ³ (å‰åºéå†)
å¿«æ’çš„æœ¬è´¨æ˜¯äºŒå‰æ ‘çš„**å‰åºéå†**ã€‚
1.  **é€‰åŸºå‡† (Pivot)**ï¼šéšæœºæŒ‘ä¸€ä¸ªæ•°ã€‚
2.  **åˆ‡åˆ† (Partition)**ï¼šæŠŠæ¯”åŸºå‡†å°çš„æ‰”å·¦è¾¹ï¼Œæ¯”åŸºå‡†å¤§çš„æ‰”å³è¾¹ã€‚
3.  **é€’å½’ (Recursion)**ï¼šå¯¹å·¦å³ä¸¤è¾¹é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°åªå‰©ä¸€ä¸ªå…ƒç´ ã€‚

## ğŸ¨ å›¾è§£æ¼”ç¤º

```mermaid
graph TD
    Root(æ•°ç»„: 5, 1, 9, 3, 7) -->|1. Partition Pivot=5| Split
    Split --> Left(å·¦åŒº: 1, 3)
    Split --> Pivot((åŸºå‡†: 5 å½’ä½))
    Split --> Right(å³åŒº: 9, 7)
    
    Left -->|2. é€’å½’å·¦è¾¹| L_Done(1, 3 æœ‰åº)
    Right -->|3. é€’å½’å³è¾¹| R_Done(7, 9 æœ‰åº)
    
    L_Done --> Result
    Pivot --> Result
    R_Done --> Result(æœ€ç»ˆ: 1, 3, 5, 7, 9)
    style Pivot fill:#f96,stroke:#333
````

## ğŸ’» ä»£ç å®ç° (C++ éšæœºåŒ–ç‰ˆ)


```cpp
class Solution {
public:
    void quickSort(vector<int>& nums, int left, int right) {
        if (left >= right) return;
        
        // 1. åˆ‡åˆ†ï¼Œå¹¶æ‹¿åˆ°åŸºå‡†å½’ä½åçš„ä¸‹æ ‡
        int pIndex = partition(nums, left, right);
        
        // 2. é€’å½’æ’å·¦è¾¹
        quickSort(nums, left, pIndex - 1);
        // 3. é€’å½’æ’å³è¾¹
        quickSort(nums, pIndex + 1, right);
    }

    int partition(vector<int>& nums, int left, int right) {
        // ğŸ² éšæœºåŒ–ä¼˜åŒ–ï¼šé˜²å¾¡æœ‰åºæ•°ç»„å¯¼è‡´è¶…æ—¶
        int randIdx = left + rand() % (right - left + 1);
        swap(nums[left], nums[randIdx]);
        
        int pivot = nums[left];
        int i = left + 1, j = right;
        
        while (true) {
            // æ‰¾å·¦è¾¹çš„åäººï¼ˆæ¯” pivot å¤§çš„ï¼‰
            while (i <= j && nums[i] < pivot) i++; // è‹¥æœ‰é‡å¤å…ƒç´ ï¼Œç”¨ < å¯è®©æ ‘æ›´å¹³è¡¡
            // æ‰¾å³è¾¹çš„åäººï¼ˆæ¯” pivot å°çš„ï¼‰
            while (i <= j && nums[j] > pivot) j--;
            
            if (i >= j) break;
            swap(nums[i], nums[j]);
            i++; j--; 
        }
        swap(nums[left], nums[j]); // åŸºå‡†å½’ä½
        return j;
    }
};
```

## ğŸ“Š å¤æ‚åº¦åˆ†æ

|**ç»´åº¦**|**æ•°å€¼**|**è¯´æ˜**|
|---|---|---|
|**æ—¶é—´ (å¹³å‡)**|$O(N \log N)$|æ¯æ¬¡åˆ‡åˆ†éƒ½å‡åŠ|
|**æ—¶é—´ (æœ€å·®)**|$O(N^2)$|æ¯æ¬¡éƒ½é€‰åˆ°æœ€å¤§/æœ€å°å€¼ (éšæœºåŒ–å¯é¿å…)|
|**ç©ºé—´**|$O(\log N)$|é€’å½’æ ˆçš„æ·±åº¦|
|**ç¨³å®šæ€§**|âŒ ä¸ç¨³å®š|è¿œè·ç¦»äº¤æ¢ç ´åé¡ºåº|

## ğŸ’¡ é€‚ç”¨åœºæ™¯

- **é€šç”¨æ’åº**ï¼šC++ `std::sort`ã€Java `Arrays.sort` (åŸºæœ¬ç±»å‹) çš„åº•å±‚æ ¸å¿ƒã€‚
    
- **æ•°ç»„æ’åºé¦–é€‰**ï¼šåœ¨å†…å­˜è¶³å¤Ÿçš„æƒ…å†µä¸‹ï¼Œå®ƒæ˜¯æœ€å¿«çš„é€šç”¨æ’åºã€‚