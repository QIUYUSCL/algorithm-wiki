# ğŸŒ² å †æ’åº (Heap Sort)

> **å½’æ¡£**: #Algorithm #Sorting #Advanced
> **æ ¸å¿ƒå¿ƒæ³•**: "ç‰¹æƒé˜¶çº§" â€”â€” ç»´æŠ¤ä¸€ä¸ªæœ€å¤§å †ï¼Œè€å¤§çš„ä½ç½®æ°¸è¿œåœ¨å †é¡¶ã€‚

## ğŸ§  æ ¸å¿ƒæ€æƒ³
åˆ©ç”¨ **å®Œå…¨äºŒå‰æ ‘** çš„æ€§è´¨ã€‚
1.  **å»ºå † (Build Heap)**ï¼šæŠŠä¹±åºæ•°ç»„è°ƒæ•´æˆä¸€ä¸ª**å¤§é¡¶å †**ï¼ˆçˆ¶èŠ‚ç‚¹ > å­èŠ‚ç‚¹ï¼‰ã€‚
2.  **äº¤æ¢ (Swap)**ï¼šæŠŠå †é¡¶ï¼ˆæœ€å¤§å€¼ï¼‰å’Œæ•°ç»„æœ«å°¾å…ƒç´ äº¤æ¢ -> æœ€å¤§å€¼é”å®šã€‚
3.  **ä¸‹æ²‰ (Sink/Heapify)**ï¼šæŠŠæ¢åˆ°å †é¡¶çš„å°å…ƒç´ â€œæ²‰â€ä¸‹å»ï¼Œæ¢å¤å †çš„æ€§è´¨ã€‚

## ğŸ¨ å›¾è§£æ¼”ç¤º

```mermaid
graph TD
    subgraph Max Heap
    Top((9)) --> L(8)
    Top --> R(5)
    end
    Action["1. äº¤æ¢ Top ä¸ æœ«å°¾"] --> Result
    Result["æ•°ç»„æœ«å°¾: ... 8, 5 | 9"] --> Heapify
    Heapify["2. 5 ä¸‹æ²‰, 8 ä¸Šä½"] --> NewHeap
    
    subgraph New Max Heap
    Top2((8)) --> L2(5)
    Top2 --> R2(...)
    end
    style Result fill:#f9f,stroke:#333
````

## ğŸ’» ä»£ç å®ç° (C++)


```cpp
class Solution {
public:
    void heapSort(vector<int>& nums) {
        int n = nums.size();
        // 1. å»ºå †ï¼šä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ sink
        for (int i = n / 2 - 1; i >= 0; i--)
            heapify(nums, n, i);
            
        // 2. æ’åºï¼šæŠŠå †é¡¶æ¢åˆ°æœ€åï¼Œç„¶åç¼©å°å †èŒƒå›´
        for (int i = n - 1; i > 0; i--) {
            swap(nums[0], nums[i]); // æœ€å¤§å€¼å½’ä½
            heapify(nums, i, 0);    // å‰©ä¸‹çš„ç»§ç»­å †åŒ–
        }
    }

    // ä¸‹æ²‰å‡½æ•°ï¼šç»´æŠ¤å †æ€§è´¨çš„æ ¸å¿ƒ
    void heapify(vector<int>& arr, int n, int i) {
        int largest = i;
        int l = 2 * i + 1;
        int r = 2 * i + 2;
        
        if (l < n && arr[l] > arr[largest]) largest = l;
        if (r < n && arr[r] > arr[largest]) largest = r;
        
        if (largest != i) {
            swap(arr[i], arr[largest]);
            heapify(arr, n, largest); // é€’å½’ä¸‹æ²‰
        }
    }
};
```

## ğŸ“Š å¤æ‚åº¦åˆ†æ

|**ç»´åº¦**|**æ•°å€¼**|**è¯´æ˜**|
|---|---|---|
|**æ—¶é—´ (å¹³å‡)**|$O(N \log N)$|å»ºå † $O(N)$, æ’åº $O(N \log N)$|
|**ç©ºé—´**|**$O(1)$**|åŸåœ°æ“ä½œï¼Œä¸éœ€è¦é¢å¤–æ•°ç»„|
|**ç¨³å®šæ€§**|âŒ ä¸ç¨³å®š|å †é¡¶äº¤æ¢ç ´åäº†é¡ºåº|

## ğŸ’¡ é€‚ç”¨åœºæ™¯

- **ç©ºé—´æåº¦å—é™**ï¼šä¸èƒ½ç”¨é€’å½’ï¼ˆé˜²çˆ†æ ˆï¼‰ï¼Œä¸èƒ½ç”¨é¢å¤–æ•°ç»„ï¼ˆå¦‚åµŒå…¥å¼è®¾å¤‡ï¼‰ï¼Œå †æ’æ˜¯å”¯ä¸€çš„ $O(N \log N)$ é€‰æ‹©ã€‚
    
- **Top K é—®é¢˜**ï¼šæ‰¾ 10 äº¿ä¸ªæ•°é‡Œæœ€å¤§çš„ 10 ä¸ªï¼Œä¸éœ€è¦å…¨æ’åºï¼Œåªéœ€ç»´æŠ¤å¤§å°ä¸º 10 çš„å †ã€‚